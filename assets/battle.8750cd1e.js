import{_ as N,a as J}from"./BallThrowing.c13bfe91.js";import{r as d,a as S,b as P,e as Q,o as u,f as _,w as I,v as T,u as e,h as l,i as F,j as M,k as p,l as z,m as j,p as W,q as L,s as R,t as Z,x as ee,y as K,z as te,A as ae,B as ne,F as oe,C as se,c as B,T as le,D as q,E as re,G as ie,H as ce}from"./entry.2e219ff4.js";import"./_plugin-vue_export-helper.c27b6911.js";const ue=""+new URL("change-chance.38de7a4b.png",import.meta.url).href,de={class:"flex justify-center items-center bg-white"},me={class:"w-1/5 mx-4"},ve={key:0,class:"relative"},_e={class:"w-1/5 mx-4"},he={class:"relative"},fe={class:"absolute top-0 right-0 flex items-center justify-end w-full h-full"},pe={__name:"ChangeChance",props:{card:{type:Object,required:!0}},emits:["takeCard"],setup(b,{emit:v}){const m=b,{lockCard:i}=W(),c=d(null),o=d(0),r=d(null),n=()=>{v("takeCard",{origin:m.card,target:m.card})},h=()=>{window.removeEventListener("beforeunload",n)},C=S(()=>o.value===0?"animate__fadeInRight":"animate__fadeOutRight"),t=()=>{o.value===0?setTimeout(()=>{o.value++},2e3):o.value===1&&o.value++},E=()=>{c.value.removeEventListener("webkitAnimationEnd",t),c.value.removeEventListener("animationend",t),c.value.removeEventListener("oanimationend",t)};return P(()=>{const g=()=>{const f=i(1,{maxChance:j[5],highChance:j[4]})[0];f.cardId===m.card.cardId?g():r.value=f};g(),c.value.addEventListener("webkitAnimationEnd",t),c.value.addEventListener("animationend",t),c.value.addEventListener("oanimationend",t),window.addEventListener("beforeunload",n)}),Q(()=>{h(),E()}),(g,f)=>{const D=N;return u(),_("div",de,[I(l("div",me,[e(r)?(u(),_("div",ve,[F(D,{card:e(r)},{default:M(()=>[l("button",{class:"relative px-4 py-2 bg-slate-400",onClick:f[0]||(f[0]=y=>g.$emit("takeCard",{origin:b.card,target:e(r)}))},"取得")]),_:1},8,["card"])])):p("",!0)],512),[[T,e(o)>1]]),I(l("div",_e,[l("div",he,[F(D,{card:b.card},{default:M(()=>[l("button",{class:"relative px-4 py-2 bg-slate-400",onClick:f[1]||(f[1]=y=>g.$emit("takeCard",{origin:b.card,target:b.card}))},"取得")]),_:1},8,["card"])])],512),[[T,e(o)>1]]),I(l("div",fe,[l("img",{ref_key:"kvRef",ref:c,class:z(["w-80 animate__animated",e(C)]),src:ue},null,2)],512),[[T,e(o)<2]])])}}},be=""+new URL("fortune_wheel.3cd7285e.png",import.meta.url).href,ge={class:"relative pb-[100%]"},we={__name:"FortuneWheel",emits:["animationDone"],setup(b,{emit:v}){const m=d(!0),i=d(0);L(m,o=>{if(o)window.requestAnimationFrame(c);else{const r=Math.random();let n=0,h=9;for(const[C,t]of R)if(r<t.appear){console.log(`${r}`,`got ${C}`),n=t.bonus,h=t.degree;break}v("animationDone",n),Z(()=>{i.value=h})}});const c=()=>{m.value&&(i.value=i.value>=360?0:i.value+30,window.requestAnimationFrame(c))};return P(()=>{window.requestAnimationFrame(c)}),ee(()=>{}),(o,r)=>(u(),_("div",ge,[l("img",{class:"block absolute left-0 top-0 w-full",style:K({transform:`rotate(${e(i)}deg)`}),src:be,alt:"",onClick:r[0]||(r[0]=n=>m.value=!1)},null,4)]))}},Ce=""+new URL("arrow_l.c01e8aed.png",import.meta.url).href,ye=""+new URL("arrow_r.c985b9bc.png",import.meta.url).href,ke=["src"],xe={__name:"Keyboard",setup(b){const v=d(!0);return L(()=>v.value,m=>{setTimeout(()=>{v.value=!m},200)}),P(()=>{v.value=!v.value}),(m,i)=>(u(),_("img",{src:e(v)?e(Ce):e(ye),alt:""},null,8,ke))}},$e={class:"relative"},De={class:"relative flex justify-center items-center h-[60vh]"},Le={class:"relative"},Ee=["onClick"],Ae=l("span",null,"取得",-1),Be={key:0,class:"absolute right-0 -top-2 bg-red-500 text-white text-sm rounded whitespace-nowrap px-2 py-1 translate-x-2/3 rotate-[20deg]"},Ie={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Te={class:"h-[40vh] overflow-hidden"},Re={class:"w-1/2 mx-auto"},Fe={key:1,class:"absolute left-1/2 bottom-1/4 w-9/12 h-4 -translate-x-1/2 border"},Me={class:"absolute w-full text-center top-1/2 left-0 -translate-y-1/2 bg-red-600"},Pe={class:"inline-block text-white text-6xl italic py-8 animate__animated animate__flipInX"},qe={__name:"battle",setup(b){const{lockCard:v,removeCard:m}=W(),i=d("");L(i,a=>{a!==""&&setTimeout(()=>{i.value=""},2e3)});const c=d([]),o=d([]),r=d(0);L(r,()=>{h.value&&o.value.length===r.value&&(console.log("全拿了! 結束 || 沒抓到 結束"),D())});const n=d(null),h=d(!1),C=d(0),t=te({addition:0,animationStart:!1,animationDone:!1,setBallColor:S(()=>t.addition===R.get("masterBall").bonus?"purple":t.addition===R.get("highBall").bonus?"yellow":t.addition===R.get("superBall").bonus?"blue":"#dc2626")});L(n,a=>{a===100&&(document.removeEventListener("keyup",g),i.value="Done !",setTimeout(()=>{h.value=!0},1e3))});const E=()=>{c.value=v(2,{maxChance:q[5],highChance:q[4]}),C.value++,i.value=`BATTLE ROUND ${C.value<2?"1":"2"} !`,setTimeout(()=>{n.value=0,document.addEventListener("keyup",g)},2e3)},g=a=>{const{code:s}=a;(s==="ArrowLeft"||s==="ArrowRight")&&(n.value<100?n.value+=10:n.value=100)},f=a=>{t.addition=a,t.animationStart=!0,c.value.forEach(s=>{const k=Math.random(),x=ce[s.cardLevel]+a;console.log(`${s.cardLevel}星目標`,`${x>1?100:x*100}%`,k),k<(x>1?1:x)&&o.value.push({id:s.cardId,chance:Math.random()})})},D=()=>{h.value=!1,t.addition=0,t.animationStart=!1,t.animationDone=!1,r.value=0,A.value=0,o.value.length=0,C.value<2&&Math.random()<ae?(console.log("連續對戰!"),E()):ne("/")},y=d(null),O=({origin:a,target:s})=>{y.value=null,r.value++,a.hide=!0,m(s.cardId)},V=a=>{if(U(a.cardId)){y.value=a;return}else r.value++,a.hide=!0,m(a.cardId)},A=d(0),U=a=>{const s=o.value.find(k=>k.id===a);return s?s.chance<ie:!1},G=S(()=>a=>t.animationDone?a?"capture-success":"capture-failed":"");return P(E),(a,s)=>{const k=N,x=J,H=pe,X=we,Y=xe;return u(),_("div",$e,[l("div",De,[(u(!0),_(oe,null,se(e(c),w=>(u(),_("div",{key:w.cardId,class:z(["w-1/5 mx-4 animate__animated animate__flipInY",[w.hide&&"invisible"]])},[l("div",Le,[F(k,{class:"animate__animated",animation:e(G)(e(o).some($=>$.id===w.cardId)),card:w,onAnimationDone:s[0]||(s[0]=$=>A.value++)},{default:M(()=>[e(o).some($=>$.id===w.cardId)&&e(A)===2?(u(),_("button",{key:0,class:"relative px-4 py-2 bg-slate-400",onClick:$=>V(w)},[Ae,U(w.cardId)?(u(),_("span",Be," 交換機會 ")):p("",!0)],8,Ee)):p("",!0)]),_:2},1032,["animation","card"]),l("div",Ie,[e(t).animationStart?(u(),B(x,{key:0,color:e(t).setBallColor,onAnimationDone:s[1]||(s[1]=$=>e(t).animationDone=!0)},null,8,["color"])):p("",!0)])])],2))),128)),e(A)===2?(u(),_("button",{key:0,class:"absolute bottom-2 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-400",onClick:D},"不取得")):p("",!0)]),e(y)?(u(),B(H,{key:0,class:"absolute w-full h-full top-0 left-0 z-10",card:e(y),onTakeCard:O},null,8,["card"])):p("",!0),l("div",Te,[l("div",Re,[e(h)?(u(),B(X,{key:0,onAnimationDone:f})):p("",!0)])]),e(n)!==null&&e(n)!==100?(u(),_("div",Fe,[e(n)!==100?(u(),B(Y,{key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 -translate-y-full",onClick:s[2]||(s[2]=w=>e(n)<100?n.value+=50:n.value=100)})):p("",!0),l("div",{class:"bg-red-600 h-full duration-200",style:K({width:`${e(n)}%`})},null,4)])):p("",!0),F(le,null,{default:M(()=>[I(l("div",Me,[l("span",Pe,re(e(i)),1)],512),[[T,e(i)]])]),_:1})])}}};export{qe as default};
