import{_ as z,a as K}from"./BallThrowing.62dce074.js";import{r,w,b as C,a as V,e as $,f as W,o as l,h as v,i as c,j as M,u as e,k as j,l as F,m as G,p as O,F as X,q as Y,s as y,c as D,t as I,v as E,T as H,x as S,y as J,z as Q,A as Z,B as ee,C as te,D as ae}from"./entry.856f254b.js";import"./_plugin-vue_export-helper.c27b6911.js";const ne=""+new URL("fortune_wheel.3cd7285e.png",import.meta.url).href,oe={class:"relative pb-[100%]"},se={__name:"FortuneWheel",emits:["animationDone"],setup(A,{emit:u}){const d=r(!0),o=r(0);w(d,m=>{if(m)window.requestAnimationFrame(_);else{const i=Math.random();let t=0,f=9;for(const[g,a]of C)if(i<a.appear){console.log(`${i}`,`got ${g}`),t=a.bonus,f=a.degree;break}u("animationDone",t),V(()=>{o.value=f})}});const _=()=>{d.value&&(o.value=o.value>=360?0:o.value+30,window.requestAnimationFrame(_))};return $(()=>{window.requestAnimationFrame(_)}),W(()=>{}),(m,i)=>(l(),v("div",oe,[c("img",{class:"block absolute left-0 top-0 w-full",style:M({transform:`rotate(${e(o)}deg)`}),src:ne,alt:"",onClick:i[0]||(i[0]=t=>d.value=!1)},null,4)]))}},le=""+new URL("arrow_l.c01e8aed.png",import.meta.url).href,re=""+new URL("arrow_r.c985b9bc.png",import.meta.url).href,ie=["src"],ue={__name:"Keyboard",setup(A){const u=r(!0);return w(()=>u.value,d=>{setTimeout(()=>{u.value=!d},200)}),$(()=>{u.value=!u.value}),(d,o)=>(l(),v("img",{src:e(u)?e(le):e(re),alt:""},null,8,ie))}},ce={class:"relative"},de={class:"relative flex justify-center items-center h-[60vh]"},me={class:"relative"},ve=["onClick"],_e={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},fe={class:"h-[40vh] overflow-hidden"},pe={class:"w-1/2 mx-auto"},he={key:0,class:"absolute left-1/2 bottom-1/4 w-9/12 h-4 -translate-x-1/2 border"},be={class:"absolute w-full text-center top-1/2 left-0 -translate-y-1/2 bg-red-600"},ye={class:"inline-block text-white text-6xl italic py-8 animate__animated animate__flipInX"},xe={__name:"battle",setup(A){const{lockCard:u,removeCard:d}=te(),o=r("");w(o,n=>{n!==""&&setTimeout(()=>{o.value=""},2e3)});const _=r([]),m=r([]),i=r(0);w(i,()=>{f.value&&m.value.length===i.value&&(console.log("全拿了! 結束 || 沒抓到 結束"),L())});const t=r(null),f=r(!1),g=r(0),a=j({addition:0,animationStart:!1,animationDone:!1,setBallColor:F(()=>a.addition===C.get("masterBall").bonus?"purple":a.addition===C.get("highBall").bonus?"yellow":a.addition===C.get("superBall").bonus?"blue":"#dc2626")});w(t,n=>{n===100&&(document.removeEventListener("keyup",T),o.value="Done !",setTimeout(()=>{f.value=!0},1e3))});const B=()=>{_.value=u(2,{maxChance:S[5],highChance:S[4]}),g.value++,o.value=`BATTLE ROUND ${g.value<2?"1":"2"} !`,setTimeout(()=>{t.value=0,document.addEventListener("keyup",T)},2e3)},T=n=>{const{code:s}=n;(s==="ArrowLeft"||s==="ArrowRight")&&(t.value<100?t.value+=10:t.value=100)},P=n=>{a.addition=n,a.animationStart=!0,_.value.forEach(s=>{const x=Math.random(),h=ae[s.cardLevel]+n;console.log(`${s.cardLevel}星目標`,`${h>1?100:h*100}%`,x),x<(h>1?1:h)&&m.value.push(s.cardId)})},L=()=>{f.value=!1,a.addition=0,a.animationStart=!1,a.animationDone=!1,i.value=0,k.value=0,m.value.length=0,g.value<2&&Math.random()<G?(console.log("連續對戰!"),B()):O("/")},R=n=>{i.value++,n.hide=!0,d(n.cardId)},k=r(0),q=F(()=>n=>a.animationDone?n?"capture-success":"capture-failed":"");return $(B),(n,s)=>{const x=z,h=K,N=se,U=ue;return l(),v("div",ce,[c("div",de,[(l(!0),v(X,null,Y(e(_),p=>(l(),v("div",{key:p.cardId,class:J(["w-1/5 mx-4 animate__animated animate__flipInY",[p.hide&&"invisible"]])},[c("div",me,[I(x,{class:"animate__animated",animation:e(q)(e(m).some(b=>b===p.cardId)),card:p,onAnimationDone:s[0]||(s[0]=b=>k.value++)},{default:E(()=>[e(m).some(b=>b===p.cardId)&&e(k)===2?(l(),v("button",{key:0,class:"px-4 py-2 bg-slate-400",onClick:b=>R(p)},"取得",8,ve)):y("",!0)]),_:2},1032,["animation","card"]),c("div",_e,[e(a).animationStart?(l(),D(h,{key:0,color:e(a).setBallColor,onAnimationDone:s[1]||(s[1]=b=>e(a).animationDone=!0)},null,8,["color"])):y("",!0)])])],2))),128)),e(k)===2?(l(),v("button",{key:0,class:"absolute bottom-2 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-400",onClick:L},"不取得")):y("",!0)]),c("div",fe,[c("div",pe,[e(f)?(l(),D(N,{key:0,onAnimationDone:P})):y("",!0)])]),e(t)!==null&&e(t)!==100?(l(),v("div",he,[e(t)!==100?(l(),D(U,{key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 -translate-y-full",onClick:s[2]||(s[2]=p=>e(t)<100?t.value+=50:t.value=100)})):y("",!0),c("div",{class:"bg-red-600 h-full duration-200",style:M({width:`${e(t)}%`})},null,4)])):y("",!0),I(H,null,{default:E(()=>[Q(c("div",be,[c("span",ye,ee(e(o)),1)],512),[[Z,e(o)]])]),_:1})])}}};export{xe as default};
