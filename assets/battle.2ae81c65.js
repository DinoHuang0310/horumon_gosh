import{_ as N,a as U}from"./MonsterCard.6d557599.js";import{r,w as g,b as k,a as z,e as C,f as K,o as s,h as m,i as d,j as I,u as e,k as S,l as V,m as W,p as j,F as G,q as O,s as b,c as x,t as L,v as F,T as X,x as E,y as Y,z as H,A as J,B as Q,C as Z,D as ee}from"./entry.34a77091.js";import"./_plugin-vue_export-helper.c27b6911.js";const te=""+new URL("fortune_wheel.3cd7285e.png",import.meta.url).href,ae={class:"relative pb-[100%]"},oe={__name:"FortuneWheel",emits:["animationDone"],setup($,{emit:i}){const c=r(!0),o=r(0);g(c,v=>{if(v)window.requestAnimationFrame(_);else{const l=Math.random();let t=0,f=9;for(const[y,a]of k)if(l<a.appear){console.log(`${l}`,`got ${y}`),t=a.bonus,f=a.degree;break}i("animationDone",t),z(()=>{o.value=f})}});const _=()=>{c.value&&(o.value=o.value>=360?0:o.value+30,window.requestAnimationFrame(_))};return C(()=>{window.requestAnimationFrame(_)}),K(()=>{}),(v,l)=>(s(),m("div",ae,[d("img",{class:"block absolute left-0 top-0 w-full",style:I({transform:`rotate(${e(o)}deg)`}),src:te,alt:"",onClick:l[0]||(l[0]=t=>c.value=!1)},null,4)]))}},ne=""+new URL("arrow_l.c01e8aed.png",import.meta.url).href,se=""+new URL("arrow_r.c985b9bc.png",import.meta.url).href,le=["src"],re={__name:"Keyboard",setup($){const i=r(!0);return g(()=>i.value,c=>{setTimeout(()=>{i.value=!c},200)}),C(()=>{i.value=!i.value}),(c,o)=>(s(),m("img",{src:e(i)?e(ne):e(se),alt:""},null,8,le))}},ie={class:"relative"},ue={class:"relative flex justify-center items-center h-[60vh]"},ce={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},de=["onClick"],me={class:"h-[40vh] overflow-hidden"},_e={class:"w-1/2 mx-auto"},ve={key:0,class:"absolute left-1/2 bottom-1/4 w-9/12 h-4 -translate-x-1/2 border"},fe={class:"absolute w-full text-center top-1/2 left-0 -translate-y-1/2 bg-red-600"},pe={class:"inline-block text-white text-6xl italic py-8 animate__animated animate__flipInX"},ge={__name:"battle",setup($){const{lockCard:i,removeCard:c}=Z(),o=r("");g(o,n=>{n!==""&&setTimeout(()=>{o.value=""},2e3)});const _=r([]),v=r([]),l=r(0);g(l,()=>{f.value&&v.value.length===l.value&&(console.log("全拿了! 結束 || 沒抓到 結束"),T())});const t=r(null),f=r(!1),y=r(0),a=S({addition:0,animated:!1,setBallColor:V(()=>a.addition===k.get("masterBall").bonus?"purple":a.addition===k.get("highBall").bonus?"yellow":a.addition===k.get("superBall").bonus?"blue":"#dc2626")});g(t,n=>{n===100&&(document.removeEventListener("keyup",D),o.value="Done !",setTimeout(()=>{f.value=!0},1e3))});const B=()=>{_.value=i(2,{maxChance:E[5],highChance:E[4]}),y.value++,o.value=`BATTLE ROUND ${y.value<2?"1":"2"} !`,setTimeout(()=>{t.value=0,document.addEventListener("keyup",D)},2e3)},D=n=>{const{code:u}=n;(u==="ArrowLeft"||u==="ArrowRight")&&(t.value<100?t.value+=10:t.value=100)},M=n=>{a.addition=n,a.animated=!0,_.value.forEach(u=>{const w=Math.random(),p=ee[u.cardLevel]+n;console.log(`${u.cardLevel}星目標`,`${p>1?100:p*100}%`,w),w<(p>1?1:p)&&setTimeout(()=>{v.value.push(u.cardId)},2e3)})},T=()=>{f.value=!1,a.addition=0,a.animated=!1,l.value=0,v.value.length=0,y.value<2&&Math.random()<W?(console.log("連續對戰!"),B()):j("/")},P=n=>{l.value++,n.hide=!0,c(n.cardId)};return C(B),(n,u)=>{const w=N,p=U,R=oe,q=re;return s(),m("div",ie,[d("div",ue,[(s(!0),m(G,null,O(e(_),h=>(s(),m("div",{key:h.cardId,class:Y(["w-1/5 mx-4 animate__animated animate__flipInY",[h.hide&&"invisible"]])},[L(p,{class:"relative",card:h},{default:F(()=>[d("div",ce,[e(a).animated?(s(),x(w,{key:0,color:e(a).setBallColor},null,8,["color"])):b("",!0)]),e(v).some(A=>A===h.cardId)?(s(),m("button",{key:0,class:"px-4 py-2 bg-slate-400",onClick:A=>P(h)},"取得",8,de)):b("",!0)]),_:2},1032,["card"])],2))),128)),e(a).animated?(s(),m("button",{key:0,class:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-400",onClick:T},"不取得")):b("",!0)]),d("div",me,[d("div",_e,[e(f)?(s(),x(R,{key:0,onAnimationDone:M})):b("",!0)])]),e(t)!==null&&e(t)!==100?(s(),m("div",ve,[e(t)!==100?(s(),x(q,{key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 -translate-y-full",onClick:u[0]||(u[0]=h=>e(t)<100?t.value+=10:t.value=100)})):b("",!0),d("div",{class:"bg-red-600 h-full duration-200",style:I({width:`${e(t)}%`})},null,4)])):b("",!0),L(X,null,{default:F(()=>[H(d("div",fe,[d("span",pe,Q(e(o)),1)],512),[[J,e(o)]])]),_:1})])}}};export{ge as default};
