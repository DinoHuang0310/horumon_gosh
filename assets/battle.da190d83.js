import{_ as S,a as U}from"./MonsterCard.1f5ea73d.js";import{r as l,w,a as $,b as V,o as n,e as m,f as d,h as P,u as t,i as R,j as W,k as j,l as G,m as O,F as X,p as Y,q as h,c as B,s as E,t as I,T as H,v as M,x as J,y as Q,z as Z,A as ee,B as te,C as ae}from"./entry.c4e55955.js";import"./_plugin-vue_export-helper.c27b6911.js";const oe={class:"relative pb-[100%]"},ne={__name:"FortuneWheel",emits:["animationDone"],setup(D,{emit:r}){const u=l(!0),b=l(0);w(u,g=>{if(g)window.requestAnimationFrame(y);else{const{masterBall:a,highBall:_,superBall:v}=R,c=Math.random();let e=0;c<a.appear?e=a.bonus:c<_.appear?e=_.bonus:c<v.appear&&(e=v.bonus),r("animationDone",e)}});const y=()=>{u.value&&(b.value+=30,window.requestAnimationFrame(y))};return $(()=>{window.requestAnimationFrame(y)}),V(()=>{}),(g,a)=>(n(),m("div",oe,[d("div",{class:"absolute left-0 top-0 w-full h-full rounded-full bg-gradient-to-r from-purple-500 to-pink-500",style:P({transform:`rotate(${t(b)}deg)`}),onClick:a[0]||(a[0]=_=>u.value=!1)},null,4)]))}},se=""+new URL("arrow_l.c01e8aed.png",import.meta.url).href,le=""+new URL("arrow_r.c985b9bc.png",import.meta.url).href,re=["src"],ie={__name:"Keyboard",setup(D){const r=l(!0);return w(()=>r.value,u=>{setTimeout(()=>{r.value=!u},200)}),$(()=>{r.value=!r.value}),(u,b)=>(n(),m("img",{src:t(r)?t(se):t(le),alt:""},null,8,re))}},ue={class:"relative"},ce={class:"relative flex justify-center items-center h-[60vh]"},de={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},me=["onClick"],_e={class:"h-[40vh] overflow-hidden"},ve={class:"w-1/2 mx-auto"},pe={key:0,class:"absolute left-1/2 bottom-1/4 w-9/12 h-4 -translate-x-1/2 border"},fe={class:"absolute w-full text-center top-1/2 left-0 -translate-y-1/2 bg-red-600"},he={class:"inline-block text-white text-6xl italic py-8 animate__animated animate__flipInX"},ge={__name:"battle",setup(D){const{masterBall:r,highBall:u,superBall:b}=R,{lockCard:y,removeCard:g}=te(),a=l("");w(a,o=>{o!==""&&setTimeout(()=>{a.value=""},2e3)});const _=l([]),v=l([]),c=l(0);w(c,()=>{x.value&&v.value.length===c.value&&(console.log("全拿了! 結束 || 沒抓到 結束"),L())});const e=l(null),x=l(!1),C=l(0),s=W({addition:0,animated:!1,setBallColor:j(()=>s.addition==r.bonus?"purple":s.addition==u.bonus?"yellow":s.addition==b.bonus?"blue":"#dc2626")});w(e,o=>{o===100&&(document.removeEventListener("keyup",A),a.value="Done !",setTimeout(()=>{x.value=!0},1e3))});const T=()=>{_.value=y(2,{maxChance:M[5],highChance:M[4]}),C.value++,a.value=`BATTLE ROUND ${C.value<2?"1":"2"} !`,setTimeout(()=>{e.value=0,document.addEventListener("keyup",A)},2e3)},A=o=>{const{code:i}=o;(i==="ArrowLeft"||i==="ArrowRight")&&(e.value<100?e.value+=10:e.value=100)},q=o=>{s.addition=o,s.animated=!0,_.value.forEach(i=>{const k=Math.random(),p=ae[i.cardLevel]+o;console.log(`${i.cardLevel}星目標`,`${p>1?100:p*100}%`,k),k<(p>1?1:p)&&setTimeout(()=>{v.value.push(i.cardId)},2e3)})},L=()=>{x.value=!1,s.addition=0,s.animated=!1,c.value=0,v.value.length=0,C.value<2&&Math.random()<G?(console.log("連續對戰!"),T()):O("/")},N=o=>{c.value++,o.hide=!0,g(o.cardId)};return $(T),(o,i)=>{const k=S,p=U,z=ne,K=ie;return n(),m("div",ue,[d("div",ce,[(n(!0),m(X,null,Y(t(_),f=>(n(),m("div",{key:f.cardId,class:J(["w-1/5 mx-4 animate__animated animate__flipInY",[f.hide&&"invisible"]])},[E(p,{class:"relative",card:f},{default:I(()=>[d("div",de,[t(s).animated?(n(),B(k,{key:0,color:t(s).setBallColor},null,8,["color"])):h("",!0)]),t(v).some(F=>F===f.cardId)?(n(),m("button",{key:0,class:"px-4 py-2 bg-slate-400",onClick:F=>N(f)},"取得",8,me)):h("",!0)]),_:2},1032,["card"])],2))),128)),t(s).animated?(n(),m("button",{key:0,class:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-400",onClick:L},"不取得")):h("",!0)]),d("div",_e,[d("div",ve,[t(x)?(n(),B(z,{key:0,onAnimationDone:q})):h("",!0)])]),t(e)!==null&&t(e)!==100?(n(),m("div",pe,[t(e)!==100?(n(),B(K,{key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 -translate-y-full",onClick:i[0]||(i[0]=f=>t(e)<100?e.value+=10:e.value=100)})):h("",!0),d("div",{class:"bg-red-600 h-full duration-200",style:P({width:`${t(e)}%`})},null,4)])):h("",!0),E(H,null,{default:I(()=>[Q(d("div",fe,[d("span",he,ee(t(a)),1)],512),[[Z,t(a)]])]),_:1})])}}};export{ge as default};
