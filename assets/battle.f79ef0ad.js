import{_ as j,a as Z}from"./BallThrowing.0de4e28f.js";import{r as c,w as $,a as S,b as L,e as q,o as m,f as h,h as ee,i as z,u as e,j as T,v as R,k as u,l as D,m as I,p as g,q as te,s as U,t as W,x as V,y as ae,z as ne,A as K,B as oe,C as se,D as le,F as re,E as ie,c as B,T as ce,G as N,H as ue,I as de,J as me}from"./entry.43223743.js";import"./_plugin-vue_export-helper.c27b6911.js";const ve={__name:"SlideToggle",props:{stay:{type:Number,default:2e3},modelValue:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(p,{emit:_}){const r=p,a=c(null),n=c(r.modelValue?0:2);$(()=>r.modelValue,t=>{t&&(n.value=0)});const d=S(()=>n.value===0?"animate__fadeInRight":n.value===1?"animate__fadeOutRight":"translate-x-full"),o=()=>{n.value===0?setTimeout(()=>{n.value++},r.stay):(n.value++,_("update:modelValue",!1))},f=()=>{a.value.removeEventListener("webkitAnimationEnd",o),a.value.removeEventListener("animationend",o),a.value.removeEventListener("oanimationend",o)};return L(()=>{a.value.addEventListener("webkitAnimationEnd",o),a.value.addEventListener("animationend",o),a.value.addEventListener("oanimationend",o)}),q(()=>{f()}),(t,i)=>(m(),h("div",{ref_key:"elRef",ref:a,class:z(["animate__animated",e(d)])},[ee(t.$slots,"default")],2))}},_e=""+new URL("change-chance.38de7a4b.png",import.meta.url).href,fe={class:"flex justify-center items-center bg-white"},he={class:"w-1/5 mx-4"},pe={key:0,class:"relative"},be={class:"w-1/5 mx-4"},ge={class:"relative"},we={class:"absolute top-0 right-0 flex items-center justify-end w-full h-full"},ye=u("img",{class:"w-80",src:_e,alt:""},null,-1),Ce={__name:"ChangeChance",props:{card:{type:Object,required:!0}},emits:["takeCard"],setup(p,{emit:_}){const r=p,{lockCard:a}=W(),n=c(!0),d=c(null),o=()=>{_("takeCard",{origin:r.card,target:r.card})},f=()=>{window.removeEventListener("beforeunload",o)};return L(()=>{const t=()=>{const i=a(1,{maxChance:U[5],highChance:U[4]})[0];i.cardId===r.card.cardId?t():d.value=i};t(),window.addEventListener("beforeunload",o)}),q(f),(t,i)=>{const b=j,v=ve;return m(),h("div",fe,[T(u("div",he,[e(d)?(m(),h("div",pe,[D(b,{card:e(d)},{default:I(()=>[u("button",{class:"relative px-4 py-2 bg-slate-400",onClick:i[0]||(i[0]=C=>t.$emit("takeCard",{origin:p.card,target:e(d)}))},"取得")]),_:1},8,["card"])])):g("",!0)],512),[[R,!e(n)]]),T(u("div",be,[u("div",ge,[D(b,{card:p.card},{default:I(()=>[u("button",{class:"relative px-4 py-2 bg-slate-400",onClick:i[1]||(i[1]=C=>t.$emit("takeCard",{origin:p.card,target:p.card}))},"取得")]),_:1},8,["card"])])],512),[[R,!e(n)]]),T(u("div",we,[D(v,{modelValue:e(n),"onUpdate:modelValue":i[2]||(i[2]=C=>te(n)?n.value=C:null)},{default:I(()=>[ye]),_:1},8,["modelValue"])],512),[[R,e(n)]])])}}},ke=""+new URL("fortune_wheel.3cd7285e.png",import.meta.url).href,xe={class:"relative pb-[100%]"},$e={__name:"FortuneWheel",emits:["animationDone"],setup(p,{emit:_}){const r=c(!0),a=c(0);$(r,d=>{if(d)window.requestAnimationFrame(n);else{const o=Math.random();let f=0,t=9;for(const[i,b]of V)if(o<b.appear){console.log(`${o}`,`got ${i}`),f=b.bonus,t=b.degree;break}_("animationDone",f),ae(()=>{a.value=t})}});const n=()=>{r.value&&(a.value=a.value>=360?0:a.value+30,window.requestAnimationFrame(n))};return L(()=>{window.requestAnimationFrame(n)}),ne(()=>{}),(d,o)=>(m(),h("div",xe,[u("img",{class:"block absolute left-0 top-0 w-full",style:K({transform:`rotate(${e(a)}deg)`}),src:ke,alt:"",onClick:o[0]||(o[0]=f=>r.value=!1)},null,4)]))}},De=""+new URL("arrow_l.c01e8aed.png",import.meta.url).href,Ie=""+new URL("arrow_r.c985b9bc.png",import.meta.url).href,Le=["src"],Ae={__name:"Keyboard",setup(p){const _=c(!0);return $(()=>_.value,r=>{setTimeout(()=>{_.value=!r},200)}),L(()=>{_.value=!_.value}),(r,a)=>(m(),h("img",{src:e(_)?e(De):e(Ie),alt:""},null,8,Le))}},Ee={class:"relative"},Be={class:"relative flex justify-center items-center h-[60vh]"},Te={class:"relative"},Re=["onClick"],Ve=u("span",null,"取得",-1),Se={key:0,class:"absolute right-0 -top-2 bg-red-500 text-white text-sm rounded whitespace-nowrap px-2 py-1 translate-x-2/3 rotate-[20deg]"},Fe={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Me={class:"h-[40vh] overflow-hidden"},Pe={class:"w-1/2 mx-auto"},Ue={key:1,class:"absolute left-1/2 bottom-1/4 w-9/12 h-4 -translate-x-1/2 border"},Ne={class:"absolute w-full text-center top-1/2 left-0 -translate-y-1/2 bg-red-600"},je={class:"inline-block text-white text-2xl sm:text-6xl italic py-8 animate__animated animate__flipInX"},Ke={__name:"battle",setup(p){const{lockCard:_,removeCard:r}=W(),a=c("");$(a,s=>{s!==""&&setTimeout(()=>{a.value=""},2e3)});const n=c([]),d=c([]),o=c(0);$(o,()=>{i.value&&d.value.length===o.value&&(console.log("全拿了! 結束 || 沒抓到 結束"),M())});const f=c([]),t=c(null),i=c(!1),b=c(0),v=oe({addition:0,animationStart:!1,animationDone:!1,setBallColor:S(()=>v.addition===V.get("masterBall").bonus?"purple":v.addition===V.get("highBall").bonus?"yellow":v.addition===V.get("superBall").bonus?"blue":"#dc2626")});$(t,s=>{s===100&&(document.removeEventListener("keyup",F),a.value="Done !",setTimeout(()=>{i.value=!0},1e3))});const C=()=>{n.value=_(2,{maxChance:N[5],highChance:N[4]}),b.value++,a.value=`BATTLE ROUND ${b.value<2?"1":"2"} !`,setTimeout(()=>{t.value=0,document.addEventListener("keyup",F)},2e3)},F=s=>{const{code:l}=s;(l==="ArrowLeft"||l==="ArrowRight")&&(t.value<100?t.value+=10:t.value=100)},O=s=>{v.addition=s,v.animationStart=!0,n.value.forEach(l=>{const k=Math.random(),x=me[l.cardLevel]+s;console.log(`${l.cardLevel}星目標`,`${x>1?100:x*100}%`,k),k<(x>1?1:x)&&d.value.push({id:l.cardId,chance:Math.random()})})},M=()=>{i.value=!1,v.addition=0,v.animationStart=!1,v.animationDone=!1,o.value=0,E.value=0,d.value.length=0,f.value.length=0,b.value<2&&Math.random()<se?(console.log("連續對戰!"),C()):le("/")},A=c(null),G=({origin:s,target:l})=>{A.value=null,o.value++,f.value.push(s.cardId),r(l.cardId)},H=s=>{if(P(s.cardId)){A.value=s;return}else o.value++,f.value.push(s.cardId),r(s.cardId)},E=c(0),P=s=>{const l=d.value.find(k=>k.id===s);return l?l.chance<de:!1},J=S(()=>s=>v.animationDone?s?"capture-success":"capture-failed":"");return L(C),(s,l)=>{const k=j,x=Z,X=Ce,Y=$e,Q=Ae;return m(),h("div",Ee,[u("div",Be,[(m(!0),h(re,null,ie(e(n),w=>(m(),h("div",{key:w.cardId,class:z(["w-1/5 mx-4 animate__animated animate__flipInY",[e(f).some(y=>y===w.cardId)&&"invisible"]])},[u("div",Te,[D(k,{class:"animate__animated",animation:e(J)(e(d).some(y=>y.id===w.cardId)),card:w,onAnimationDone:l[0]||(l[0]=y=>E.value++)},{default:I(()=>[e(d).some(y=>y.id===w.cardId)&&e(E)===2?(m(),h("button",{key:0,class:"relative px-4 py-2 bg-slate-400",onClick:y=>H(w)},[Ve,P(w.cardId)?(m(),h("span",Se," 交換機會 ")):g("",!0)],8,Re)):g("",!0)]),_:2},1032,["animation","card"]),u("div",Fe,[e(v).animationStart?(m(),B(x,{key:0,color:e(v).setBallColor,onAnimationDone:l[1]||(l[1]=y=>e(v).animationDone=!0)},null,8,["color"])):g("",!0)])])],2))),128)),e(E)===2?(m(),h("button",{key:0,class:"absolute bottom-2 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-400",onClick:M},"不取得")):g("",!0)]),e(A)?(m(),B(X,{key:0,class:"absolute w-full h-full top-0 left-0 z-10",card:e(A),onTakeCard:G},null,8,["card"])):g("",!0),u("div",Me,[u("div",Pe,[e(i)?(m(),B(Y,{key:0,onAnimationDone:O})):g("",!0)])]),e(t)!==null&&e(t)!==100?(m(),h("div",Ue,[e(t)!==100?(m(),B(Q,{key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 -translate-y-full",onClick:l[2]||(l[2]=w=>e(t)<100?t.value+=50:t.value=100)})):g("",!0),u("div",{class:"bg-red-600 h-full duration-200",style:K({width:`${e(t)}%`})},null,4)])):g("",!0),D(ce,null,{default:I(()=>[T(u("div",Ne,[u("span",je,ue(e(a)),1)],512),[[R,e(a)]])]),_:1})])}}};export{Ke as default};
