import{_ as q,a as N}from"./MonsterCard.6f5a22a9.js";import{r,w,a as k,b as z,o as n,e as m,f as d,h as E,u as e,i as K,j as S,k as U,l as V,m as W,F as j,p as G,q as y,c as x,s as A,t as L,T as O,v as F,x as X,y as Y,z as H,A as J,B as Q,C as Z}from"./entry.75cd923b.js";import"./_plugin-vue_export-helper.c27b6911.js";const ee={class:"relative pb-[100%]"},te={__name:"FortuneWheel",emits:["animationDone"],setup(C,{emit:i}){const c=r(!0),s=r(0);w(c,v=>{if(v)window.requestAnimationFrame(_);else{const{masterBall:l,highBall:t,superBall:p}=K,f=Math.random();let a=0;f<l.appear?a=l.bonus:f<t.appear?a=t.bonus:f<p.appear&&(a=p.bonus),i("animationDone",a)}});const _=()=>{c.value&&(s.value+=30,window.requestAnimationFrame(_))};return k(()=>{window.requestAnimationFrame(_)}),z(()=>{}),(v,l)=>(n(),m("div",ee,[d("div",{class:"absolute left-0 top-0 w-full h-full rounded-full bg-gradient-to-r from-purple-500 to-pink-500",style:E({transform:`rotate(${e(s)}deg)`}),onClick:l[0]||(l[0]=t=>c.value=!1)},null,4)]))}},ae=""+new URL("arrow_l.c01e8aed.png",import.meta.url).href,oe=""+new URL("arrow_r.c985b9bc.png",import.meta.url).href,ne=["src"],se={__name:"Keyboard",setup(C){const i=r(!0);return w(()=>i.value,c=>{setTimeout(()=>{i.value=!c},200)}),k(()=>{i.value=!i.value}),(c,s)=>(n(),m("img",{src:e(i)?e(ae):e(oe),alt:""},null,8,ne))}},le={class:"relative"},re={class:"relative flex justify-center items-center h-[60vh]"},ie={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},ue=["onClick"],ce={class:"h-[40vh] overflow-hidden"},de={class:"w-1/2 mx-auto"},me={key:0,class:"absolute left-1/2 bottom-1/4 w-9/12 h-4 -translate-x-1/2 border"},_e={class:"absolute w-full text-center top-1/2 left-0 -translate-y-1/2 bg-red-600"},ve={class:"inline-block text-white text-6xl italic py-8 animate__animated animate__flipInX"},be={__name:"battle",setup(C){const{lockCard:i,removeCard:c}=Q(),s=r("");w(s,o=>{o!==""&&setTimeout(()=>{s.value=""},2e3)});const _=r([]),v=r([]),l=r(0);w(l,()=>{p.value&&v.value.length===l.value&&(console.log("全拿了! 結束 || 沒抓到 結束"),D())});const t=r(null),p=r(!1),f=r(0),a=S({addition:0,animated:!1,setBallColor:U(()=>a.addition==1?"purple":a.addition==.1?"yellow":a.addition==.05?"blue":"#dc2626")});w(t,o=>{o===100&&(document.removeEventListener("keyup",$),s.value="Done !",setTimeout(()=>{p.value=!0},1e3))});const B=()=>{_.value=i(2,{maxChance:F[5],highChance:F[4]}),f.value++,s.value=`BATTLE ROUND ${f.value<2?"1":"2"} !`,setTimeout(()=>{t.value=0,document.addEventListener("keyup",$)},2e3)},$=o=>{const{code:u}=o;(u==="ArrowLeft"||u==="ArrowRight")&&(t.value<100?t.value+=10:t.value=100)},I=o=>{a.addition=o,a.animated=!0,_.value.forEach(u=>{const g=Math.random(),h=Z[u.cardLevel]+o;console.log(`${u.cardLevel}星目標`,`${h>1?100:h*100}%`,g),g<(h>1?1:h)&&setTimeout(()=>{v.value.push(u.cardId)},2e3)})},D=()=>{p.value=!1,a.addition=0,a.animated=!1,l.value=0,v.value.length=0,f.value<2&&Math.random()<V?(console.log("連續對戰!"),B()):W("/")},M=o=>{l.value++,o.hide=!0,c(o.cardId)};return k(B),(o,u)=>{const g=q,h=N,P=te,R=se;return n(),m("div",le,[d("div",re,[(n(!0),m(j,null,G(e(_),b=>(n(),m("div",{key:b.cardId,class:X(["w-1/5 mx-4 animate__animated animate__flipInY",[b.hide&&"invisible"]])},[A(h,{class:"relative",card:b},{default:L(()=>[d("div",ie,[e(a).animated?(n(),x(g,{key:0,color:e(a).setBallColor},null,8,["color"])):y("",!0)]),e(v).some(T=>T===b.cardId)?(n(),m("button",{key:0,class:"px-4 py-2 bg-slate-400",onClick:T=>M(b)},"取得",8,ue)):y("",!0)]),_:2},1032,["card"])],2))),128)),e(a).animated?(n(),m("button",{key:0,class:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-slate-400",onClick:D},"不取得")):y("",!0)]),d("div",ce,[d("div",de,[e(p)?(n(),x(P,{key:0,onAnimationDone:I})):y("",!0)])]),e(t)!==null&&e(t)!==100?(n(),m("div",me,[e(t)!==100?(n(),x(R,{key:0,class:"absolute -top-8 left-1/2 -translate-x-1/2 -translate-y-full",onClick:u[0]||(u[0]=b=>e(t)<100?t.value+=10:t.value=100)})):y("",!0),d("div",{class:"bg-red-600 h-full duration-200",style:E({width:`${e(t)}%`})},null,4)])):y("",!0),A(O,null,{default:L(()=>[Y(d("div",_e,[d("span",ve,J(e(s)),1)],512),[[H,e(s)]])]),_:1})])}}};export{be as default};
